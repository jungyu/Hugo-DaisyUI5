{{- if gt .TotalPages 1 }}
<div class="flex justify-center mt-8">
  <div class="join">
    {{- if .HasPrev }}
    <a href="{{ .Prev.URL }}" class="join-item btn" aria-label="上一頁">
      <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
      </svg>
      {{ i18n "pagination.previous" | default "上一頁" }}
    </a>
    {{- else }}
    <span class="join-item btn btn-disabled">
      <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
      </svg>
      {{ i18n "pagination.previous" | default "上一頁" }}
    </span>
    {{- end }}
    
    {{- $currentPageNumber := .PageNumber }}
    {{- $totalPages := .TotalPages }}
    
    {{- range $pageNumber := (seq 1 $totalPages) }}
      {{- if eq $pageNumber $currentPageNumber }}
      <span class="join-item btn btn-active">{{ $pageNumber }}</span>
      {{- else if or (le $pageNumber 2) (ge $pageNumber (sub $totalPages 1)) (and (ge $pageNumber (sub $currentPageNumber 1)) (le $pageNumber (add $currentPageNumber 1))) }}
      <a href="{{ $.Paginator.PageUrl $pageNumber }}" class="join-item btn">{{ $pageNumber }}</a>
      {{- else if or (eq $pageNumber 3) (eq $pageNumber (sub $totalPages 2)) }}
      <span class="join-item btn btn-disabled">...</span>
      {{- end }}
    {{- end }}
    
    {{- if .HasNext }}
    <a href="{{ .Next.URL }}" class="join-item btn" aria-label="下一頁">
      {{ i18n "pagination.next" | default "下一頁" }}
      <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
      </svg>
    </a>
    {{- else }}
    <span class="join-item btn btn-disabled">
      {{ i18n "pagination.next" | default "下一頁" }}
      <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
      </svg>
    </span>
    {{- end }}
  </div>
</div>

<div class="text-center mt-4 text-sm text-base-content/60">
  {{ i18n "pagination.page" (dict "Current" .PageNumber "Total" .TotalPages) | 
     default (printf "第 %d 頁，共 %d 頁" .PageNumber .TotalPages) }}
</div>
{{- end }}
