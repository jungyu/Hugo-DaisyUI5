/* TWDA v5 主題主要樣式文件 */
/* 基於 TailwindCSS v4.1.11 + DaisyUI v5.0.43 */

@import 'tailwindcss/base';
@import 'tailwindcss/components';
@import 'tailwindcss/utilities';

/* Google Fonts - Inter 與 Noto Sans TC */
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&family=Noto+Sans+TC:wght@100;300;400;500;700;900&display=swap');

/* 基礎樣式層 */
@layer base {
  html {
    @apply scroll-smooth;
    font-feature-settings: 'cv02', 'cv03', 'cv04', 'cv11';
  }
  
  body {
    @apply bg-base-100 text-base-content font-sans antialiased;
    font-family: 'Inter', 'Noto Sans TC', system-ui, -apple-system, sans-serif;
  }
  
  /* 中文字體最佳化 */
  :lang(zh) {
    font-family: 'Noto Sans TC', 'Inter', system-ui, -apple-system, sans-serif;
  }
  
  /* 程式碼字體 */
  code, pre, kbd, samp {
    font-family: 'JetBrains Mono', 'Fira Code', 'Consolas', 'Monaco', monospace;
  }
  
  /* 選取文字樣式 */
  ::selection {
    @apply bg-primary text-primary-content;
  }
  
  /* 滾動條樣式 */
  ::-webkit-scrollbar {
    @apply w-2;
  }
  
  ::-webkit-scrollbar-track {
    @apply bg-base-200;
  }
  
  ::-webkit-scrollbar-thumb {
    @apply bg-base-300 rounded-full;
  }
  
  ::-webkit-scrollbar-thumb:hover {
    @apply bg-base-content/30;
  }
  
  /* Focus 樣式 */
  :focus-visible {
    @apply outline-2 outline-offset-2 outline-primary;
  }
}

/* 組件樣式層 */
@layer components {
  /* 導航列自訂樣式 */
  .navbar-custom {
    @apply navbar bg-base-100/80 backdrop-blur-md shadow-lg border-b border-base-300/50;
    @apply sticky top-0 z-50 transition-all duration-300;
  }
  
  /* 文章卡片樣式 */
  .card-post {
    @apply card bg-base-100 shadow-xl hover:shadow-2xl;
    @apply transition-all duration-300 transform hover:-translate-y-1;
    @apply border border-base-300/50;
  }
  
  .card-post:hover {
    @apply border-primary/20;
  }
  
  /* 按鈕樣式增強 */
  .btn-theme-toggle {
    @apply btn btn-ghost btn-circle;
    @apply hover:bg-primary/10 hover:text-primary;
    @apply transition-all duration-200;
  }
  
  .btn-back-to-top {
    @apply btn btn-primary btn-circle shadow-lg;
    @apply fixed bottom-6 right-6 z-40;
    @apply transform scale-0 transition-transform duration-300;
  }
  
  .btn-back-to-top.show {
    @apply scale-100;
  }
  
  /* Hero 區域樣式 */
  .hero-custom {
    @apply hero min-h-screen;
    @apply bg-gradient-to-br from-primary/10 via-base-100 to-secondary/10;
  }
  
  /* Prose 內容樣式 */
  .prose-content {
    @apply prose prose-lg max-w-none;
    @apply prose-headings:text-base-content prose-p:text-base-content;
    @apply prose-a:text-primary prose-a:no-underline hover:prose-a:underline;
    @apply prose-strong:text-base-content prose-code:text-primary;
    @apply prose-pre:bg-base-200 prose-pre:border prose-pre:border-base-300;
    @apply prose-blockquote:border-l-primary prose-blockquote:text-base-content/80;
    @apply prose-img:rounded-lg prose-img:shadow-md;
  }
  
  /* 深色模式下的 prose 樣式 */
  [data-theme="dracula"] .prose-content {
    @apply prose-invert;
  }
  
  /* 程式碼區塊包裝器 */
  .code-block-wrapper {
    @apply relative group;
  }
  
  .code-block-wrapper pre {
    @apply bg-base-200 border border-base-300 rounded-lg;
    @apply overflow-x-auto p-4 my-4;
  }
  
  .code-block-wrapper .btn {
    @apply opacity-0 group-hover:opacity-100 transition-opacity duration-200;
  }
  
  /* 搜尋結果樣式 */
  .search-modal {
    @apply modal modal-open;
  }
  
  .search-result-item {
    @apply p-3 rounded-lg hover:bg-base-200 cursor-pointer;
    @apply transition-colors duration-200;
  }
  
  /* 標籤雲樣式 */
  .tag-cloud {
    @apply flex flex-wrap gap-2;
  }
  
  .tag-cloud .badge {
    @apply hover:scale-105 transition-transform duration-200;
  }
  
  /* 載入動畫 */
  .loading-spinner {
    @apply animate-spin rounded-full h-8 w-8 border-2 border-primary/20 border-t-primary;
  }
  
  /* 頁面轉場動畫 */
  .page-transition {
    @apply transition-all duration-300 ease-in-out;
  }
  
  /* 圖片懶載入樣式 */
  .lazy-image {
    @apply transition-opacity duration-300;
  }
  
  .lazy-image.loading {
    @apply opacity-0;
  }
  
  .lazy-image.loaded {
    @apply opacity-100;
  }
  
  /* 目錄導航樣式 */
  .toc-nav {
    @apply hidden lg:block fixed right-8 top-1/2 transform -translate-y-1/2;
    @apply bg-base-100/80 backdrop-blur-md rounded-lg shadow-lg;
    @apply border border-base-300/50 p-4 max-w-xs;
  }
  
  .toc-nav ul {
    @apply space-y-1;
  }
  
  .toc-nav a {
    @apply block py-1 px-2 text-sm text-base-content/70;
    @apply hover:text-primary hover:bg-primary/10 rounded;
    @apply transition-colors duration-200;
  }
  
  .toc-nav a.active {
    @apply text-primary bg-primary/10 font-medium;
  }
  
  /* 讀取進度條 */
  .reading-progress {
    @apply fixed top-0 left-0 w-full h-1 bg-primary/20 z-50;
  }
  
  .reading-progress-bar {
    @apply h-full bg-primary transition-all duration-150 ease-out;
  }
  
  /* 響應式圖片容器 */
  .responsive-image {
    @apply relative overflow-hidden rounded-lg;
  }
  
  .responsive-image img {
    @apply w-full h-full object-cover transition-transform duration-300;
  }
  
  .responsive-image:hover img {
    @apply scale-105;
  }
  
  /* 社群分享按鈕 */
  .share-buttons {
    @apply flex gap-2 flex-wrap;
  }
  
  .share-btn {
    @apply btn btn-sm btn-outline;
    @apply hover:scale-105 transition-transform duration-200;
  }
}

/* 工具樣式層 */
@layer utilities {
  /* 文字漸層效果 */
  .text-gradient {
    @apply bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent;
  }
  
  /* 玻璃態效果 */
  .glass-effect {
    @apply bg-white/10 backdrop-blur-md border border-white/20;
  }
  
  [data-theme="dracula"] .glass-effect {
    @apply bg-black/10 border-white/10;
  }
  
  /* 陰影層級 */
  .shadow-soft {
    box-shadow: 0 2px 15px -3px rgba(0, 0, 0, 0.07), 0 10px 20px -2px rgba(0, 0, 0, 0.04);
  }
  
  .shadow-medium {
    box-shadow: 0 4px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
  }
  
  .shadow-strong {
    box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
  }
  
  /* 動畫工具類別 */
  .animate-fade-in {
    animation: fadeIn 0.5s ease-in-out;
  }
  
  .animate-slide-up {
    animation: slideUp 0.5s ease-out;
  }
  
  .animate-bounce-in {
    animation: bounceIn 0.6s ease-out;
  }
  
  /* 無障礙隱藏 */
  .sr-only {
    @apply absolute w-px h-px p-0 -m-px overflow-hidden whitespace-nowrap border-0;
    clip: rect(0, 0, 0, 0);
  }
}

/* 動畫定義 */
@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes slideUp {
  from {
    transform: translateY(30px);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

@keyframes bounceIn {
  0% {
    transform: scale(0.3);
    opacity: 0;
  }
  50% {
    transform: scale(1.05);
  }
  70% {
    transform: scale(0.9);
  }
  100% {
    transform: scale(1);
    opacity: 1;
  }
}

/* 列印樣式 */
@media print {
  .navbar-custom,
  .btn-back-to-top,
  .share-buttons,
  .toc-nav {
    @apply hidden;
  }
  
  .prose-content {
    @apply text-black;
  }
  
  .prose-content a {
    @apply text-black underline;
  }
}

/* 減少動畫偏好設定 */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}
